<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>会员查看详情</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">
		<link rel="stylesheet" href="../../layui/css/layui.css" media="all" />
	</head>
	<body>
	
		<br/>
		<br/>
		<form class="layui-form" id="form"> 
			<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label" >会员</label>
		  			<div class="layui-input-block">
		  				<input v-model="serviceuservo.username" disabled="disabled" type="text" name="username"   lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input">
		  			</div>
		  		</div>
		  	</div><div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label" >用户单号</label>
		  			<div class="layui-input-block">
		  				<input v-model="serviceuservo.orderid" disabled="disabled" type="text" name="username"   lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input">
		  			</div>
		  		</div>
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">订单金额</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" :value="serviceuservo.price">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label" >物品标题</label>
		  			<div class="layui-input-block">
		  				<input  disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.title">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">物品描述</label>
		  			<div class="layui-input-block">
		  				<input  disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.describe">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">图片一</label>
		  			<div class="layui-input-block">
		  			<img :src="serviceuservo.img1">
		  			</div>
		  		</div>
		  	</div>
		  <div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">图片二</label>
		  			<div class="layui-input-block">
		  			<img :src="serviceuservo.img2">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">图片三</label>
		  			<div class="layui-input-block">
		  			<img :src="serviceuservo.img3">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">图片四</label>
		  			<div class="layui-input-block">
		  			<img :src="serviceuservo.img4">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">图片五</label>
		  			<div class="layui-input-block">
		  			<img :src="serviceuservo.img5">
		  			</div>
		  		</div>
		  	</div>
		  <div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">重量</label>
		  			<div class="layui-input-block">
		  				<input  disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.kg">
		  			</div>
		  		</div>
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">发货方式</label>
		  			<div class="layui-input-block">
		  				<input  disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" :value="serviceuservo.delivery==1?'上门提货':'自发'">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">发货地址</label>
		  			<div class="layui-input-block">
		  				<input  disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.useraddr">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">收货地址</label>
		  			<div class="layui-input-block">
		  				<input  disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.collectgoodsaddr">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">下单日期</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.ordertime">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">支付时间</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.completetimetimestamp">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md10">
		  			<label class="layui-form-label">审核时间</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.confirmationtime">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">物流单号</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.logisticssinglenumber">
		  			</div>
		  		</div>
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">用户货单号提供时间</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.submittime">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">国际快递单号1</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.number1">
		  			</div>
		  		</div>
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">国际快递单号1提供时间</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.numbertime1">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">国际快递单号2</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.number2">
		  			</div>
		  		</div>
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">国际快递单号2提供时间</label>
		  			<div class="layui-input-block">
		  				<input disabled="disabled" type="text" lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input" v-model="serviceuservo.numbertime2">
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">原因</label>
		  			<div class="layui-input-block">
		  				<textarea v-model="serviceuservo.auditopiniontext" required lay-verify="required" placeholder="请输入" class="layui-textarea"></textarea>
		  			</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item" id="auditstatus">
		  	<div class=" layui-col-md8" >
	  			<label class="layui-form-label" >订单状态</label>
	  			<div class="layui-input-block" id="spanHtml">
	  				<input checked lay-filter="boolUpdate" type="radio" name="auditstatus" value="1" title="待审核">
	  				<input lay-filter="boolUpdate" type="radio" name="auditstatus" value="2" title="已通过" >
	  				<input lay-filter="boolUpdate" type="radio" name="auditstatus" value="3" title="已拒绝">
	  			</div>
	  		</div>
	  		</div>
		  <div class="layui-row" style="padding-left: 100px;">
		    <button id="submit" type="button"  @click="update($event)" class="layui-btn layui-btn-normal" >提交</button><button type="button"  class="layui-btn layui-btn-warm" onclick="window.history.go(-1);">返回</button>
		  </div>
		</form>
		
	</body>		
	<script src="../../js/jquery-1.12.4.js"></script>
	<script src="../../layui/layui.js"></script>
	<script src="../../js/vue.js"></script>
	<script>
		layui.use('form' , function () {
			var form=layui.form;
			var auditstatus=null;
			var vm=new Vue({
				el:'#form',
				data:{
					serviceuservo:{}
				},
				created:function(){
					var path = window.location.search;//获取传递的参数
					var orderid = path.substr(path.indexOf('=') + 1, path.length);	//传递过来的sid
					this.getList(orderid);	
				},
				methods:{
					getList:function(orderid){
						var vm=this;
						$.getJSON('/c/th/QueryLogisticsAndorderID',{'orderid':orderid},function(result){   
							vm.serviceuservo=result;	//给VUE赋值
							switch(result.auditstatus){
							case 0:
								$("#spanHtml").html('<span style="line-height:40px;">待付款</span>');$("#submit").remove();break;
							case 1:
								$("[name=auditstatus]:eq(0)").attr('checked','checked');break;
							case 2:
								$("[name=auditstatus]:eq(1)").attr('checked','checked');break;
							case 3:
								$("[name=auditstatus]:eq(2)").attr('checked','checked');break;
							case 4:
								$("#spanHtml").html('<span style="line-height:40px;">待提供快递单号</span>');$("#submit").remove();break;
							case 5:
								$("#spanHtml").html('<span style="line-height:40px;">完成发货</span>');$("#submit").remove();break;
							case 6:
								$("#spanHtml").html('<span style="line-height:40px;">管理员取消</span>');$("#submit").remove();break;
							case 7:
								$("#spanHtml").html('<span style="line-height:40px;">已退款</span>');$("#submit").remove();break;
							case 8:
								$("#spanHtml").html('<span style="line-height:40px;">已完成</span>');$("#submit").remove();break;
							}
							form.on('radio(boolUpdate)', function(data){
								  var name=$(data.elem).attr("name");
								  vm.serviceuservo[name]=data.value;
							});
							form.render('radio');
						})
						$(".left10").css("margin-left","10px");
						$(".left0").css("margin-left","0px");
					},
				 	 update:function(e){
						var vm=this;
						$.ajax({
							url:"/c/th/UpdateLogistics",
							type:"post",
							data:JSON.stringify(vm.serviceuservo),
							contentType:"application/json",
							dataType:"json",
							success:function(result){
								if(result.code==200){
									layer.open({title: '操作提示',content: '提交成功'}); 
								}else{
									layer.open({title: '操作提示',content: '提交失败'}); 
								}
							}
						})
					}
				}
			})
			form.render();
		});
		
	</script>
</html>
