<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>订单查看详情</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">
		<link rel="stylesheet" href="../../layui/css/layui.css" media="all" />
	</head>
	<body>
	
		<br/>
		<br/>
		<form class="layui-form" id="form"> 
			<div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label">会员</label>
		  			<div class="layui-input-block">
		  				<input v-model="user.username" disabled="disabled" type="text" name="username"   lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input">
		  			</div>
		  		</div>
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label" >联系电话</label>
		  			<div class="layui-input-block">
		  				<input v-model="user.merchantphone" disabled="disabled" type="text" name="username"   lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input">
		  			</div>
		  		</div>
		  	</div>
		  	
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label" >免费体验</label>
		  			<div class="layui-input-block">
		  				<input v-model="user.experiencestatus==true?'开启':'关闭'" disabled="disabled" type="text" name="username"   lay-verify="" placeholder="待完善" autocomplete="off" class="layui-input">
		  			</div>
		  		</div>
		  		<div class="layui-col-md5">
		  			<label class="layui-form-label" >免费月数</label>
		  			<div class="layui-input-block layui-col-md2">
		  				<select name="experience" lay-verify="" lay-filter="experience">
		  					<option value="1" >1</option>
		  					<option value="2">2</option>
		  					<option value="3">3</option>
		  					<option value="4">4</option>
		  					<option value="5">5</option>
		  					<option value="6">6</option>
		  					<option value="7">7</option>
		  					<option value="8">8</option>
		  					<option value="9">9</option>
		  					<option value="10">10</option>
		  					<option value="11">11</option>
		  					<option value="12">12</option>
		  				</select>
					</div>
		  		</div>
		  	</div>
		  	<div class="layui-form-item">
		  		<div class=" layui-col-md5">
		  			<label class="layui-form-label" >审核备注</label>
		  			<div class="layui-input-block">
		  			<textarea id="reason" v-model="user.reason" required lay-verify="required" placeholder="请输入" class="layui-textarea">
		  			
		  			</textarea>
		  			</div>
		  		</div>
		  	</div>
		  <div class="layui-row">
		    <button id="submit" type="button"  @click="update($event)" class="layui-btn layui-btn-normal" style="margin-left: 100px;">提交</button><button type="button"  class="layui-btn layui-btn-warm" onclick="window.history.go(-1);">返回</button>
		  </div>
		</form>
		
	</body>		
	<script src="../../js/jquery-1.12.4.js"></script>
	<script src="../../layui/layui.js"></script>
	<script src="../../js/vue.js"></script>
	<script>
		layui.use('form' , function () {
			var form=layui.form;
			var auditstatus=null;
			var vm=new Vue({
				el:'#form',
				data:{
					user:{}
				},
				created:function(){
					var path = window.location.search;//获取传递的参数
					var userID = path.substr(path.indexOf('=') + 1, path.length);	//传递过来的sid
					this.getList(userID);	
				},
				methods:{
					getList:function(userID){
						var vm=this;
						$.getJSON('/c/ohl/user/queryRuzhuSee',{'userID':userID},function(result){   
							vm.user=result;	//给VUE赋值
							auditstatus=result.auditstatus;
							if(result.auditstatus==1){
								$("[name=auditstatus]:eq(0)").attr('checked','checked');
							}else{
								$("#selfintroduction").attr("readonly","readonly");//禁用管理员审核备注
								$("#auditstatus").remove();
							}
							form.on('radio(boolUpdate)', function(data){
								  var name=$(data.elem).attr("name");
								  vm.user[name]=data.value;
							});
						})
						$(".left10").css("margin-left","10px");
						$(".left0").css("margin-left","0px");
					},
					update:function(e){
						var vm=this;
						if(auditstatus==1){
							$.post("/c/ohl/user/updateShangjiaSee",{"auditStatus":vm.user.auditstatus,"merchantType":vm.user.merchanttype,"reason":vm.user.reason,"userID":vm.user.userid},function(result){
								if(result.code==200){
									layer.open({title: '操作提示',content: '提交成功'}); 
								}else{
									layer.open({title: '操作提示',content: '提交失败'}); 
								}
							})
						}else{
							layer.open({title: '操作提示',content: '该请求已受理'});
						}
					}
				}
			})
			form.render();
		});
		
	</script>
</html>
